<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MCompositor: /home/tomek/powerpack/mcompositor/mcompositor-1.1.35/src/mwindowpropertycache.h (1.1.35-1+0m8) Source File</title>
<link href="meegotouch.css" rel="stylesheet" type="text/css">
<!--<link href="tabs.css" rel="stylesheet" type="text/css">-->
</head><body>


<table>
<tr>
<td></td>
<td>
<a href="index.html">Home</a>
<!--
·
<a href="namespaces.html">All Namespaces</a> -->
·
<a href="classes.html">All Classes</a>
</td>
</tr>
</table>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>/home/tomek/powerpack/mcompositor/mcompositor-1.1.35/src/mwindowpropertycache.h (1.1.35-1+0m8)</h1>  </div>
</div>
<div class="contents">
<a href="mwindowpropertycache_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">**</span>
<a name="l00003"></a>00003 <span class="comment">** Copyright (C) 2010 Nokia Corporation and/or its subsidiary(-ies).</span>
<a name="l00004"></a>00004 <span class="comment">** All rights reserved.</span>
<a name="l00005"></a>00005 <span class="comment">** Contact: Nokia Corporation (directui@nokia.com)</span>
<a name="l00006"></a>00006 <span class="comment">**</span>
<a name="l00007"></a>00007 <span class="comment">** This file is part of mcompositor.</span>
<a name="l00008"></a>00008 <span class="comment">**</span>
<a name="l00009"></a>00009 <span class="comment">** If you have questions regarding the use of this file, please contact</span>
<a name="l00010"></a>00010 <span class="comment">** Nokia at directui@nokia.com.</span>
<a name="l00011"></a>00011 <span class="comment">**</span>
<a name="l00012"></a>00012 <span class="comment">** This library is free software; you can redistribute it and/or</span>
<a name="l00013"></a>00013 <span class="comment">** modify it under the terms of the GNU Lesser General Public</span>
<a name="l00014"></a>00014 <span class="comment">** License version 2.1 as published by the Free Software Foundation</span>
<a name="l00015"></a>00015 <span class="comment">** and appearing in the file LICENSE.LGPL included in the packaging</span>
<a name="l00016"></a>00016 <span class="comment">** of this file.</span>
<a name="l00017"></a>00017 <span class="comment">**</span>
<a name="l00018"></a>00018 <span class="comment">****************************************************************************/</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef MWINDOWPROPERTYCACHE_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define MWINDOWPROPERTYCACHE_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;QRegion&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;QX11Info&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;QVector&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;X11/Xutil.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;X11/Xlib-xcb.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;X11/Xmd.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;xcb/render.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;xcb/shape.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;X11/extensions/shape.h&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;X11/extensions/Xdamage.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;mcompatoms_p.h&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="keyword">class </span><a class="code" href="class_m_c_smart_timer.html">MCSmartTimer</a>;
<a name="l00036"></a>00036 
<a name="l00040"></a><a class="code" href="class_m_window_property_cache.html">00040</a> <span class="keyword">class </span><a class="code" href="class_m_window_property_cache.html">MWindowPropertyCache</a>: <span class="keyword">public</span> QObject
<a name="l00041"></a>00041 {
<a name="l00042"></a>00042     Q_OBJECT
<a name="l00043"></a>00043 <span class="keyword">public</span>:
<a name="l00044"></a>00044 
<a name="l00045"></a>00045     <span class="comment">// for MCompositeManager::dumpState()</span>
<a name="l00046"></a>00046     <a class="code" href="class_m_window_property_cache.html#a5e492d7e075065449a296d3bc4fbe346">Q_ENUMS</a>(<a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1">WindowState</a>);
<a name="l00047"></a><a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1">00047</a>     <span class="keyword">enum</span> <a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1">WindowState</a> {
<a name="l00048"></a><a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1ab8a6927f11f7bcdf5a832ec61c4f754e">00048</a>         <a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1ab8a6927f11f7bcdf5a832ec61c4f754e">Unknown</a>   = -1,
<a name="l00049"></a><a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1a2568e3f68cf0d1d3030a592a1e49f5e4">00049</a>         <a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1a2568e3f68cf0d1d3030a592a1e49f5e4">Withdrawn</a> = WithdrawnState,
<a name="l00050"></a><a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1a5e92b5f42842ddf309bc2c258b06f2e5">00050</a>         <a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1a5e92b5f42842ddf309bc2c258b06f2e5">Iconic</a>    = IconicState,
<a name="l00051"></a><a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1aa25a8926b93f38d46977b4d6d1fd8ae3">00051</a>         <a class="code" href="class_m_window_property_cache.html#a44da482281e5edc1c4fcf31b7d8428a1aa25a8926b93f38d46977b4d6d1fd8ae3">Normal</a>    = NormalState,
<a name="l00052"></a>00052     };
<a name="l00053"></a><a class="code" href="class_m_window_property_cache_1_1_collector.html">00053</a>     <span class="keyword">class </span><a class="code" href="class_m_window_property_cache_1_1_collector.html">Collector</a> {
<a name="l00054"></a>00054     <span class="keyword">public</span>:
<a name="l00055"></a><a class="code" href="class_m_window_property_cache_1_1_collector.html#a5f35bcaa45d99b959ae4eeb99833ddc2">00055</a>         <a class="code" href="class_m_window_property_cache_1_1_collector.html#a5f35bcaa45d99b959ae4eeb99833ddc2">Collector</a>() : <a class="code" href="class_m_window_property_cache_1_1_collector.html#aef5faedf7386441bad130699a96b2c0a">cookie</a>(0), <a class="code" href="class_m_window_property_cache_1_1_collector.html#a3d873127c33620829e10f21d2a01b15c">name</a>(QLatin1String(<span class="stringliteral">&quot;&quot;</span>)), <a class="code" href="class_m_window_property_cache_1_1_collector.html#a5b2c70c3e9df4a328cbc38256e7ef13b">requested</a>(0) {}
<a name="l00056"></a><a class="code" href="class_m_window_property_cache_1_1_collector.html#aef5faedf7386441bad130699a96b2c0a">00056</a>         <span class="keywordtype">unsigned</span> <a class="code" href="class_m_window_property_cache_1_1_collector.html#aef5faedf7386441bad130699a96b2c0a">cookie</a>;
<a name="l00057"></a><a class="code" href="class_m_window_property_cache_1_1_collector.html#a3d873127c33620829e10f21d2a01b15c">00057</a>         QLatin1String <a class="code" href="class_m_window_property_cache_1_1_collector.html#a3d873127c33620829e10f21d2a01b15c">name</a>;
<a name="l00058"></a><a class="code" href="class_m_window_property_cache_1_1_collector.html#a5b2c70c3e9df4a328cbc38256e7ef13b">00058</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="class_m_window_property_cache_1_1_collector.html#a5b2c70c3e9df4a328cbc38256e7ef13b">requested</a>;
<a name="l00059"></a>00059     };
<a name="l00060"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045">00060</a>     <span class="keyword">enum</span> <a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045">CollectorKey</a> {
<a name="l00061"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a2557f1a7ab979ba9bd21ce44ed4fa80e">00061</a>         shapeRegionKey,
<a name="l00062"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045abd22b114adba3de079fe5c8d711d2832">00062</a>         customRegionKey,
<a name="l00063"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045aeb289e35b5a7551419a2052dd2ceb2ae">00063</a>         transientForKey,
<a name="l00064"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a7b00b77acb1168df9431d2fdf415d54a">00064</a>         invokedByKey,
<a name="l00065"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a7b2f086940b0a671ce537c2ff87fdacd">00065</a>         cannotMinimizeKey,
<a name="l00066"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a51509a279b05149e42ba5f0fee1d7f6d">00066</a>         noAnimationsKey,
<a name="l00067"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a695fb4c4c197f90b1e04c09642c7e11d">00067</a>         videoOverlayKey,
<a name="l00068"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a54530f250f3c4ac2d27abdebd21b34db">00068</a>         alwaysMappedKey,
<a name="l00069"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a757ca53dde09138932cc6c53ddcb6a21">00069</a>         desktopViewKey,
<a name="l00070"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045aef1681d9b6422544dccba901f03dfc6a">00070</a>         isDecoratorKey,
<a name="l00071"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045ac1156606cd561993a5325b9a9818f65b">00071</a>         meegoStackingLayerKey,
<a name="l00072"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045ad9968170705457db6d0bd4619467170f">00072</a>         lowPowerModeKey,
<a name="l00073"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a1a4e89ad22b716600a1e52cd00869cbe">00073</a>         opaqueWindowKey,
<a name="l00074"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045ab376672bd96b306a449d7d6fa5c348d4">00074</a>         prestartedAppKey,
<a name="l00075"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a3dea3ccaa22ad3a1aea2b508b6e8a21f">00075</a>         getWMHintsKey,
<a name="l00076"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a78c3b0922657373b77896bdc37a8a0c5">00076</a>         pidKey,
<a name="l00077"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a031cc211fa2f5fcb48aa5532618994e0">00077</a>         windowStateKey,
<a name="l00078"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045afe71e95f8763dfcba8767118517e4e99">00078</a>         orientationAngleKey,
<a name="l00079"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a567266616bbbf02439b04d1675e64123">00079</a>         statusbarGeometryKey,
<a name="l00080"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a253ed2fd8632349fcb9143513b4468ec">00080</a>         supportedProtocolsKey,
<a name="l00081"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045aa3f8da8a171b822228189f5970c73d76">00081</a>         netWmStateKey,
<a name="l00082"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a4338081d6e36e9ec37231df6579296b8">00082</a>         skippingTaskbarMarkerKey,
<a name="l00083"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045ac0bd42b4bddf7c18b1e571593b4b93e2">00083</a>         iconGeometryKey,
<a name="l00084"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a8230f9b6c72b4d7bceb58a3b1dc07cca">00084</a>         globalAlphaKey,
<a name="l00085"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045ab42955edf9d003852701bf196771e77b">00085</a>         videoGlobalAlphaKey,
<a name="l00086"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045af4f8d9b1c2608feedcc71d187c352d4c">00086</a>         windowTypeAtomKey,
<a name="l00087"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a67c007976fb78b3fd8d540d8e32d956d">00087</a>         realGeometryKey,
<a name="l00088"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045ac13ae92402551c6d09e66a0ad985ac73">00088</a>         wmNameKey,
<a name="l00089"></a><a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a8fed2a7645cf673f9a2d7b150d398f90">00089</a>         <a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045a8fed2a7645cf673f9a2d7b150d398f90">lastCollectorKey</a>
<a name="l00090"></a>00090     };
<a name="l00091"></a>00091 
<a name="l00096"></a>00096     <a class="code" href="class_m_window_property_cache.html#af4a49070a6a66d523eb1c95686019885">MWindowPropertyCache</a>();
<a name="l00097"></a>00097     <a class="code" href="class_m_window_property_cache.html#af4a49070a6a66d523eb1c95686019885">MWindowPropertyCache</a>(Window <a class="code" href="class_m_window_property_cache.html#a34d9f9f3a45814c013fefb0674616908">window</a>,
<a name="l00098"></a>00098                          xcb_get_window_attributes_reply_t *<a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a> = 0,
<a name="l00099"></a>00099                          xcb_get_geometry_reply_t *geom = 0,
<a name="l00100"></a>00100                          Damage damage_obj = 0);
<a name="l00101"></a>00101     <span class="keyword">virtual</span> <a class="code" href="class_m_window_property_cache.html#a00f160a45dbef7dc1416eb73551c739e">~MWindowPropertyCache</a>();
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     MCompAtoms::Type <a class="code" href="class_m_window_property_cache.html#afbb988501fa18fe185bfb5adc20162c5">windowType</a>();
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="class_m_window_property_cache.html#abf193bf32220261fea59aaddea2f53e4">00105</a>     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#abf193bf32220261fea59aaddea2f53e4">setRequestedGeometry</a>(<span class="keyword">const</span> QRect &amp;rect) {
<a name="l00106"></a>00106         <a class="code" href="class_m_window_property_cache.html#a8a021a8c781a701913136f9aaa4eaf43">req_geom</a> = rect;
<a name="l00107"></a>00107     }
<a name="l00108"></a><a class="code" href="class_m_window_property_cache.html#a786ac5c5d8dc26646f3c14c64c82afd4">00108</a>     <span class="keyword">const</span> QRect <a class="code" href="class_m_window_property_cache.html#a786ac5c5d8dc26646f3c14c64c82afd4">requestedGeometry</a>()<span class="keyword"> const </span>{
<a name="l00109"></a>00109         <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a8a021a8c781a701913136f9aaa4eaf43">req_geom</a>;
<a name="l00110"></a>00110     }
<a name="l00111"></a>00111 
<a name="l00112"></a>00112     <span class="comment">// this is called on ConfigureNotify</span>
<a name="l00113"></a>00113     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a8be6c97d13243a2a220a32aed374fa38">setRealGeometry</a>(<span class="keyword">const</span> QRect &amp;rect);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">// This is where MCompositeManager stores the expectResize().</span>
<a name="l00116"></a>00116     <span class="comment">// Until its ConfigureNotify arrives, they are ignored.</span>
<a name="l00117"></a><a class="code" href="class_m_window_property_cache.html#a92a66689ede2fecee328c91006cc701a">00117</a>     QRect &amp;<a class="code" href="class_m_window_property_cache.html#a92a66689ede2fecee328c91006cc701a">expectedGeometry</a>() { <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#ab56ee76df9dbde86550171055975ddd4">expected_geom</a>; }
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="class_m_window_property_cache.html#ab7a53414533c209ab3e46219eb12b111">00119</a>     Window <a class="code" href="class_m_window_property_cache.html#ab7a53414533c209ab3e46219eb12b111">winId</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a34d9f9f3a45814c013fefb0674616908">window</a>; }
<a name="l00120"></a><a class="code" href="class_m_window_property_cache.html#a6ad84eec1e894d16eb7cf14429e767b2">00120</a>     Window <a class="code" href="class_m_window_property_cache.html#a6ad84eec1e894d16eb7cf14429e767b2">parentWindow</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#afc81e5776a7a83c45eb8e2a3952eb433">parent_window</a>; }
<a name="l00121"></a><a class="code" href="class_m_window_property_cache.html#aca95622182ddb7a8e7ad8e2036a36b50">00121</a>     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#aca95622182ddb7a8e7ad8e2036a36b50">setParentWindow</a>(Window w) { <a class="code" href="class_m_window_property_cache.html#afc81e5776a7a83c45eb8e2a3952eb433">parent_window</a> = w; }
<a name="l00122"></a>00122 
<a name="l00126"></a>00126     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#ada4654c0576a9d99f5d39ee6c64438bb">wantsFocus</a>();
<a name="l00127"></a>00127 
<a name="l00131"></a>00131     XID <a class="code" href="class_m_window_property_cache.html#a0bf1bc304630726b974dd038f946d0a0">windowGroup</a>();
<a name="l00132"></a>00132 
<a name="l00136"></a><a class="code" href="class_m_window_property_cache.html#a8756bb753c27ba2391fe0d59473dac7c">00136</a>     <span class="keyword">const</span> QList&lt;Window&gt;&amp; <a class="code" href="class_m_window_property_cache.html#a8756bb753c27ba2391fe0d59473dac7c">transientWindows</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a999cdd00288d56ee11d05b95cace5021">transients</a>; }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <span class="comment">// If @state is not in _NET_WM_STATE yet, addToNetWmState() adds it</span>
<a name="l00139"></a>00139     <span class="comment">// and returns true, otherwise just returns false.  Similarly,</span>
<a name="l00140"></a>00140     <span class="comment">// removeFromNetWmState() only updates the property if necessary,</span>
<a name="l00141"></a>00141     <span class="comment">// and returns whether it did.  forceSkippingTaskbar() is meant</span>
<a name="l00142"></a>00142     <span class="comment">// to set _NET_WM_STATE_SKIP_TASKBAR temporarily, remember the</span>
<a name="l00143"></a>00143     <span class="comment">// previous state, and restore it when the enforcement ends.</span>
<a name="l00144"></a>00144     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#af78ffa42ae60da93d9ceaf30ec371827">addToNetWmState</a>(Atom state);
<a name="l00145"></a>00145     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a4962a9da14c8aac45d9320d976d90508">removeFromNetWmState</a>(Atom state);
<a name="l00146"></a>00146     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#af37676d244dfdac8745daa468f1972e0">forceSkippingTaskbar</a>(<span class="keywordtype">bool</span> force);
<a name="l00147"></a>00147 
<a name="l00152"></a><a class="code" href="class_m_window_property_cache.html#a775b44bdeca1897fc020b729e41f1518">00152</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a775b44bdeca1897fc020b729e41f1518">beingMapped</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a469dd555537babf0feded31424a720bf">being_mapped</a>; }
<a name="l00153"></a><a class="code" href="class_m_window_property_cache.html#ab6e82a4912c6d0dcec94b600ae2d6780">00153</a>     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#ab6e82a4912c6d0dcec94b600ae2d6780">setBeingMapped</a>(<span class="keywordtype">bool</span> s) { <a class="code" href="class_m_window_property_cache.html#a469dd555537babf0feded31424a720bf">being_mapped</a> = s; }
<a name="l00154"></a><a class="code" href="class_m_window_property_cache.html#a6a78ac3c772d217898a3f3c8fa6945ea">00154</a>     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a6a78ac3c772d217898a3f3c8fa6945ea">setDontIconify</a>(<span class="keywordtype">bool</span> s) { <a class="code" href="class_m_window_property_cache.html#aec15e48a8a48a343646e58620c5bba2f">dont_iconify</a> = s; }
<a name="l00155"></a>00155     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#afa7f998b77b9f42fb8ac15fe925e0445">dontIconify</a>();
<a name="l00156"></a>00156     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#ad200f07582b3418d3c1d1f9d23e933c1">isLockScreen</a>();
<a name="l00157"></a>00157     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#ab92f3a278c27476ffdc344273f4c9140">isCallUi</a>();
<a name="l00158"></a><a class="code" href="class_m_window_property_cache.html#aae1d01ce45de5f4cf59c9d7a24c7e9a7">00158</a>     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#aae1d01ce45de5f4cf59c9d7a24c7e9a7">setStackedUnmapped</a>(<span class="keywordtype">bool</span> s) { <a class="code" href="class_m_window_property_cache.html#ac155abd96bce672f61f10a2d67ff3d81">stacked_unmapped</a> = s; }
<a name="l00159"></a><a class="code" href="class_m_window_property_cache.html#a42dbb4ad176bfdcacdc9e2fd4acca288">00159</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a42dbb4ad176bfdcacdc9e2fd4acca288">stackedUnmapped</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#ac155abd96bce672f61f10a2d67ff3d81">stacked_unmapped</a>; }
<a name="l00160"></a>00160 
<a name="l00161"></a><a class="code" href="class_m_window_property_cache.html#a1709095fcff6c4f2488c440a6a8d2a49">00161</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a1709095fcff6c4f2488c440a6a8d2a49">isMapped</a>()<span class="keyword"> const </span>{
<a name="l00162"></a>00162         <span class="keywordflow">if</span> (!<a class="code" href="class_m_window_property_cache.html#af58b7913e8ad298148903ca1ff788fac">is_valid</a> || !<a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>)
<a name="l00163"></a>00163             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00164"></a>00164         <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>-&gt;map_state == XCB_MAP_STATE_VIEWABLE;
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166 
<a name="l00167"></a><a class="code" href="class_m_window_property_cache.html#a1a6559dc1496308610bbfd0c0ce27930">00167</a>     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a1a6559dc1496308610bbfd0c0ce27930">setIsMapped</a>(<span class="keywordtype">bool</span> s) {
<a name="l00168"></a>00168         <span class="keywordflow">if</span> (!<a class="code" href="class_m_window_property_cache.html#af58b7913e8ad298148903ca1ff788fac">is_valid</a> || !<a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>)
<a name="l00169"></a>00169             <span class="keywordflow">return</span>;
<a name="l00170"></a>00170         <span class="comment">// a bit ugly but avoids a round trip to X...</span>
<a name="l00171"></a>00171         <span class="keywordflow">if</span> (s)
<a name="l00172"></a>00172             <a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>-&gt;map_state = XCB_MAP_STATE_VIEWABLE;
<a name="l00173"></a>00173         <span class="keywordflow">else</span>
<a name="l00174"></a>00174             <a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>-&gt;map_state = XCB_MAP_STATE_UNMAPPED;
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#ad20f9ce5539c2a03b49eace91e672d70">setWindowState</a>(<span class="keywordtype">int</span> state);
<a name="l00178"></a>00178     
<a name="l00183"></a><a class="code" href="class_m_window_property_cache.html#aed62a331b4c8bdeabaae13afd383175f">00183</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#aed62a331b4c8bdeabaae13afd383175f">isOverrideRedirect</a>()<span class="keyword"> const </span>{
<a name="l00184"></a>00184         <span class="keywordflow">if</span> (!<a class="code" href="class_m_window_property_cache.html#af58b7913e8ad298148903ca1ff788fac">is_valid</a> || !<a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>)
<a name="l00185"></a>00185             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00186"></a>00186         <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>-&gt;override_redirect;
<a name="l00187"></a>00187     }
<a name="l00188"></a><a class="code" href="class_m_window_property_cache.html#a41c365a31dac5fc25f61dfb0d42222f1">00188</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a41c365a31dac5fc25f61dfb0d42222f1">isInputOnly</a>()<span class="keyword"> const </span>{
<a name="l00189"></a>00189         <span class="keywordflow">if</span> (!<a class="code" href="class_m_window_property_cache.html#af58b7913e8ad298148903ca1ff788fac">is_valid</a> || !<a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>)
<a name="l00190"></a>00190             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00191"></a>00191         <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>-&gt;_class == XCB_WINDOW_CLASS_INPUT_ONLY;
<a name="l00192"></a>00192     }
<a name="l00193"></a>00193 
<a name="l00194"></a><a class="code" href="class_m_window_property_cache.html#a2bdfcbe2aaf2fa7165085bb532647278">00194</a>     <span class="keyword">const</span> xcb_get_window_attributes_reply_t* <a class="code" href="class_m_window_property_cache.html#a2bdfcbe2aaf2fa7165085bb532647278">windowAttributes</a>()<span class="keyword"> const </span>{
<a name="l00195"></a>00195             <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>; };
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a67f2d3052a4cca3227d33e206b7b557a">setSkippingTaskbarMarker</a>(<span class="keywordtype">bool</span>);
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 <span class="keyword">public</span> slots:
<a name="l00200"></a>00200     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a6b5e5be7aa157422699ad188d42da87b">isDecorator</a>();
<a name="l00201"></a>00201     Atom <a class="code" href="class_m_window_property_cache.html#a5432f221c9920b609fb6a6e665f51971">windowTypeAtom</a>();
<a name="l00202"></a>00202     <span class="keywordtype">unsigned</span> <a class="code" href="class_m_window_property_cache.html#ad4fd7b5a823451bae9694420df5b3c2a">pid</a>();
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keyword">const</span> XWMHints &amp;<a class="code" href="class_m_window_property_cache.html#a93b9250517b87203225c0881f41e25a0">getWMHints</a>();
<a name="l00205"></a>00205     <span class="keyword">const</span> QRect <a class="code" href="class_m_window_property_cache.html#a4cc231d25570deae92653ac69f209a90">realGeometry</a>();
<a name="l00206"></a>00206     <span class="keyword">const</span> QRectF &amp;<a class="code" href="class_m_window_property_cache.html#ab6a88b14bfbebf9968da9426c3b39313">iconGeometry</a>();
<a name="l00207"></a>00207     <span class="keyword">const</span> QRegion &amp;<a class="code" href="class_m_window_property_cache.html#ac640b7012f74b46ad3de7461517bc869">shapeRegion</a>();
<a name="l00208"></a>00208     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a9574a28b2bc0ea8b01b909bde04d59e1">shapeRefresh</a>();
<a name="l00209"></a>00209 
<a name="l00210"></a>00210     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a3269045c0ddf71ce34b797f10ff5e77a">hasAlpha</a>();
<a name="l00211"></a><a class="code" href="class_m_window_property_cache.html#a22484a7f22d71504c3f1c8d6ca4d22f9">00211</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a22484a7f22d71504c3f1c8d6ca4d22f9">hasAlphaAndIsNotOpaque</a>()
<a name="l00212"></a>00212         { <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a3269045c0ddf71ce34b797f10ff5e77a">hasAlpha</a>() &amp;&amp; !<a class="code" href="class_m_window_property_cache.html#af037da8e4419a8ec04fcc098a37ac16b" title="Returns value of _MEEGOTOUCH_OPAQUE_WINDOW. When 1, forces.">opaqueWindow</a>(); }
<a name="l00213"></a>00213     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a3ef0322853df18ab3227c7e3c3f6b768">globalAlpha</a>();
<a name="l00214"></a>00214     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a4b4edce6c979f4694f08580303f1a978">videoGlobalAlpha</a>();
<a name="l00215"></a>00215 
<a name="l00217"></a>00217     Window <a class="code" href="class_m_window_property_cache.html#ab7b5d28ed8310a9c9710b14f7d52ca69" title="Returns value of TRANSIENT_FOR property.">transientFor</a>();
<a name="l00218"></a>00218 
<a name="l00220"></a>00220     Window <a class="code" href="class_m_window_property_cache.html#abd5bb670a24be64f1efc5e87761879fb" title="Returns value of _MEEGOTOUCH_WM_INVOKED_BY property.">invokedBy</a>();
<a name="l00221"></a>00221 
<a name="l00223"></a>00223     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a78247ab204f5225f10ce5e45b9eebddc" title="Returns the first cardinal of WM_STATE of this window.">windowState</a>();
<a name="l00224"></a>00224 
<a name="l00226"></a>00226     <span class="keyword">const</span> QVector&lt;Atom&gt;&amp; <a class="code" href="class_m_window_property_cache.html#adf75030e49e8b4f30259da10277e249b" title="Returns list of _NET_WM_STATE of the window.">netWmState</a>();
<a name="l00227"></a>00227 
<a name="l00229"></a>00229     <span class="keyword">const</span> QList&lt;Atom&gt;&amp; <a class="code" href="class_m_window_property_cache.html#a9c2579a4b57f830858a33779567e84e6" title="Returns list of WM_PROTOCOLS of the window.">supportedProtocols</a>();
<a name="l00230"></a>00230 
<a name="l00232"></a>00232     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a714a02b6105308a193ae372f89a9b1a3" title="Returns value of _MEEGO_STACKING_LAYER. The value is between [0, 10].">meegoStackingLayer</a>();
<a name="l00233"></a>00233 
<a name="l00235"></a>00235     <span class="comment">//  switching off compositing for any window type, and special handling</span>
<a name="l00236"></a>00236     <span class="comment">//  when the display is off.</span>
<a name="l00237"></a>00237     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a3d50db058f5b407a934217e2bc2facd1" title="Returns value of _MEEGO_LOW_POWER_MODE. The value is 0 or 1. Allows.">lowPowerMode</a>();
<a name="l00238"></a>00238 
<a name="l00240"></a>00240     <span class="comment">//  compositing off for this window even if it has an alpha channel.</span>
<a name="l00241"></a>00241     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#af037da8e4419a8ec04fcc098a37ac16b" title="Returns value of _MEEGOTOUCH_OPAQUE_WINDOW. When 1, forces.">opaqueWindow</a>();
<a name="l00242"></a>00242 
<a name="l00244"></a>00244     <span class="keywordtype">unsigned</span> <a class="code" href="class_m_window_property_cache.html#ac6dd3981e2515e76c3d1e947710db77a" title="Returns the value of _MEEGOTOUCH_ORIENTATION_ANGLE.">orientationAngle</a>();
<a name="l00245"></a>00245 
<a name="l00247"></a>00247     <span class="keyword">const</span> QRect &amp;<a class="code" href="class_m_window_property_cache.html#adf374089ff530fde1da6d88f73f9324a" title="Returns the value of _MEEGOTOUCH_MSTATUSBAR_GEOMETRY.">statusbarGeometry</a>();
<a name="l00248"></a>00248 
<a name="l00250"></a>00250     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a1aaf079f125cded7a8bb9babef256078" title="Returns value of _MEEGOTOUCH_ALWAYS_MAPPED.">alwaysMapped</a>();
<a name="l00251"></a>00251 
<a name="l00253"></a>00253     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a3d5d65c4c227b8602531e7f869df3a19" title="Returns value of _MEEGOTOUCH_CANNOT_MINIMIZE.">cannotMinimize</a>();
<a name="l00254"></a>00254 
<a name="l00256"></a>00256     <span class="keyword">const</span> QRegion &amp;<a class="code" href="class_m_window_property_cache.html#a07aacdf64755db9d6b3effde9dce91c0" title="Returns value of _MEEGOTOUCH_CUSTOM_REGION.">customRegion</a>();
<a name="l00257"></a>00257     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a07aacdf64755db9d6b3effde9dce91c0" title="Returns value of _MEEGOTOUCH_CUSTOM_REGION.">customRegion</a>(<span class="keywordtype">bool</span> request_only);
<a name="l00258"></a>00258 
<a name="l00260"></a>00260     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a8f33ee541864020d990fa8b8ecaa118c" title="Returns value of _MEEGOTOUCH_DESKTOP_VIEW (makes sense for desktop only).">desktopView</a>();
<a name="l00261"></a>00261     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a8f33ee541864020d990fa8b8ecaa118c" title="Returns value of _MEEGOTOUCH_DESKTOP_VIEW (makes sense for desktop only).">desktopView</a>(<span class="keywordtype">bool</span> request_only);
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="comment">// WM_NAME</span>
<a name="l00264"></a>00264     <span class="keyword">const</span> QString &amp;<a class="code" href="class_m_window_property_cache.html#a1093b5c93130bfb38e33d083701a5bba">wmName</a>();
<a name="l00265"></a>00265 
<a name="l00266"></a>00266     <span class="comment">// Value of _MEEGOTOUCH_NO_ANIMATIONS window property. It can be used</span>
<a name="l00267"></a>00267     <span class="comment">// for cases when restore/iconifying/closing animation is not wanted.</span>
<a name="l00268"></a>00268     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a69db75a79610fe4630b8b35d585b9559">noAnimations</a>();
<a name="l00269"></a>00269 
<a name="l00270"></a>00270     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a2b755b7769bd899f68e63459da9f8b66">videoOverlay</a>();
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a1ba7344e79a0240997f7d2dd5cd07350">skippingTaskbarMarker</a>();
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 <span class="keyword">public</span>:
<a name="l00279"></a>00279     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#ad35232acaba8630a02d417faee61668b">propertyEvent</a>(XPropertyEvent *e);
<a name="l00280"></a>00280 
<a name="l00281"></a><a class="code" href="class_m_window_property_cache.html#a4668b9217b0092ebace3497350f8e9d6">00281</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#af58b7913e8ad298148903ca1ff788fac">is_valid</a>, <a class="code" href="class_m_window_property_cache.html#a4668b9217b0092ebace3497350f8e9d6">is_virtual</a>;
<a name="l00282"></a>00282 
<a name="l00283"></a><a class="code" href="class_m_window_property_cache.html#a0190a526e8695b852a87242d14ef5c46">00283</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a0190a526e8695b852a87242d14ef5c46">set_xcb_connection</a>(xcb_connection_t *c) {
<a name="l00284"></a>00284         <a class="code" href="class_m_window_property_cache.html#ae12c9c00145ac5bea353272150045212">MWindowPropertyCache::xcb_conn</a> = c;
<a name="l00285"></a>00285     }
<a name="l00286"></a>00286 
<a name="l00292"></a>00292     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a7d38751064eda4caa28a51371702e6d8">damageTracking</a>(<span class="keywordtype">bool</span> enabled);
<a name="l00293"></a>00293 
<a name="l00300"></a>00300     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a7d38751064eda4caa28a51371702e6d8">damageTracking</a>(<span class="keywordtype">int</span> damageReportLevel);
<a name="l00301"></a>00301     <span class="comment">// XDamageSubtract wrapper for unit testing</span>
<a name="l00302"></a>00302     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a7ab9340050afb46a35cd9c8f19baebaa">damageSubtract</a>();
<a name="l00303"></a>00303     <span class="comment">// for unit testing of damage handling code</span>
<a name="l00304"></a>00304     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#ac7a3ce4851f4340eeb7fe32c15724cb9">damageReceived</a>();
<a name="l00305"></a>00305 
<a name="l00309"></a>00309     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a7a62e4934aded0475f962b130af7959a">isAppWindow</a>(<span class="keywordtype">bool</span> include_transients = <span class="keyword">false</span>);
<a name="l00310"></a>00310 
<a name="l00315"></a>00315     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a4c3df9b0057f5b255f389b3350018ec2">readSplashProperty</a>(Window win,
<a name="l00316"></a>00316                    <span class="keywordtype">unsigned</span> &amp;splash_pid, <span class="keywordtype">unsigned</span> &amp;splash_pixmap,
<a name="l00317"></a>00317                    QString &amp;splash_landscape, QString &amp;splash_portrait);
<a name="l00318"></a>00318 
<a name="l00323"></a><a class="code" href="class_m_window_property_cache.html#a25c3d6c461fcf3e0863cdbe9f1959fc5">00323</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a25c3d6c461fcf3e0863cdbe9f1959fc5">isVirtual</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a4668b9217b0092ebace3497350f8e9d6">is_virtual</a>; }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#aa645c5baf0f59783ffaf6f4289d4a2ac">waitingForDamage</a>() <span class="keyword">const</span>;
<a name="l00326"></a>00326     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a5a68ef0eabd5d2ee18eb0ad95123556d">setWaitingForDamage</a>(<span class="keywordtype">int</span> waiting);
<a name="l00327"></a>00327 signals:
<a name="l00328"></a>00328     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a936c20928401844a68d52da79386cb06">iconGeometryUpdated</a>();
<a name="l00329"></a>00329     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#ac94fd90ae969b784b5758de87e8cc454">desktopViewChanged</a>(<a class="code" href="class_m_window_property_cache.html">MWindowPropertyCache</a> *pc);
<a name="l00330"></a>00330     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a2d64da52ef81326b97b371aa782c8e16">alwaysMappedChanged</a>(<a class="code" href="class_m_window_property_cache.html">MWindowPropertyCache</a> *pc);
<a name="l00331"></a>00331     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a4cb78002801d363a1c6794be9a4ec228">customRegionChanged</a>(<a class="code" href="class_m_window_property_cache.html">MWindowPropertyCache</a> *pc);
<a name="l00332"></a>00332 
<a name="l00333"></a>00333 <span class="keyword">private</span> slots:
<a name="l00334"></a>00334     <span class="keywordtype">bool</span> prestartedApp();
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 <span class="keyword">private</span>:
<a name="l00337"></a>00337     <span class="keywordtype">void</span> init();
<a name="l00338"></a>00338     <span class="keywordtype">void</span> init_invalid();
<a name="l00339"></a>00339     <span class="keywordtype">bool</span> getCARD32(<span class="keyword">const</span> <a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045">CollectorKey</a> key, CARD32 *value);
<a name="l00340"></a>00340 
<a name="l00341"></a>00341 <span class="keyword">protected</span>:
<a name="l00342"></a><a class="code" href="class_m_window_property_cache.html#ac99a2619c17b153e57ff22153359ae59">00342</a>     Window <a class="code" href="class_m_window_property_cache.html#ac99a2619c17b153e57ff22153359ae59">transient_for</a>;
<a name="l00343"></a><a class="code" href="class_m_window_property_cache.html#ae6fdef79d8fcdbef153775a5984b16be">00343</a>     Window <a class="code" href="class_m_window_property_cache.html#ae6fdef79d8fcdbef153775a5984b16be">invoked_by</a>;
<a name="l00344"></a><a class="code" href="class_m_window_property_cache.html#a999cdd00288d56ee11d05b95cace5021">00344</a>     QList&lt;Window&gt; <a class="code" href="class_m_window_property_cache.html#a999cdd00288d56ee11d05b95cace5021">transients</a>;
<a name="l00345"></a><a class="code" href="class_m_window_property_cache.html#ae521247100f3e65a6ffaacae2aa04bc7">00345</a>     QList&lt;Atom&gt; <a class="code" href="class_m_window_property_cache.html#ae521247100f3e65a6ffaacae2aa04bc7">wm_protocols</a>;
<a name="l00346"></a><a class="code" href="class_m_window_property_cache.html#a4e325bec0e2e1c2274308848971a9c95">00346</a>     QRectF <a class="code" href="class_m_window_property_cache.html#a4e325bec0e2e1c2274308848971a9c95">icon_geometry</a>;
<a name="l00347"></a><a class="code" href="class_m_window_property_cache.html#a4d2deec78a45b7b475bafc8249531054">00347</a>     <span class="keywordtype">signed</span> <span class="keywordtype">char</span> <a class="code" href="class_m_window_property_cache.html#a4d2deec78a45b7b475bafc8249531054">has_alpha</a>;
<a name="l00348"></a><a class="code" href="class_m_window_property_cache.html#a4e8ff3b15da7f23d6b710d6336d5aae8">00348</a>     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a4e8ff3b15da7f23d6b710d6336d5aae8">global_alpha</a>;
<a name="l00349"></a><a class="code" href="class_m_window_property_cache.html#a68ec572599927f0763dabbebe64d7c42">00349</a>     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a68ec572599927f0763dabbebe64d7c42">video_global_alpha</a>;
<a name="l00350"></a><a class="code" href="class_m_window_property_cache.html#a7a43d86a4bda5e7ba1ea31043bbce469">00350</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a7a43d86a4bda5e7ba1ea31043bbce469">is_decorator</a>;
<a name="l00351"></a><a class="code" href="class_m_window_property_cache.html#aba284c0df541c15fa286ba42488a0180">00351</a>     QVector&lt;Atom&gt; <a class="code" href="class_m_window_property_cache.html#aba284c0df541c15fa286ba42488a0180">net_wm_state</a>;
<a name="l00352"></a>00352     <span class="comment">// @force_skipping_taskbar indicates whether forceSkippingTaskbar()</span>
<a name="l00353"></a>00353     <span class="comment">// is in effect, and whether @was_skipping_taskbar is to be restored</span>
<a name="l00354"></a><a class="code" href="class_m_window_property_cache.html#a74aad062374533ab2ed76f1fe01a3a23">00354</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a275fbe64c0fceae2080787a46667ca28">force_skipping_taskbar</a>, <a class="code" href="class_m_window_property_cache.html#a74aad062374533ab2ed76f1fe01a3a23">was_skipping_taskbar</a>;
<a name="l00355"></a>00355     <span class="comment">// geometry is requested only once in the beginning, after that, we</span>
<a name="l00356"></a>00356     <span class="comment">// use ConfigureNotifys to update the size through setRealGeometry()</span>
<a name="l00357"></a><a class="code" href="class_m_window_property_cache.html#a04ea10121d7c557f34441af568ba9c32">00357</a>     QRect <a class="code" href="class_m_window_property_cache.html#a8a021a8c781a701913136f9aaa4eaf43">req_geom</a>, <a class="code" href="class_m_window_property_cache.html#a9729581d9ff2c819820c1fecb81ccb21">real_geom</a>, <a class="code" href="class_m_window_property_cache.html#ab56ee76df9dbde86550171055975ddd4">expected_geom</a>, <a class="code" href="class_m_window_property_cache.html#a04ea10121d7c557f34441af568ba9c32">statusbar_geom</a>;
<a name="l00358"></a><a class="code" href="class_m_window_property_cache.html#ab7f8872f182f9d3e34caa9b41d3414da">00358</a>     XWMHints *<a class="code" href="class_m_window_property_cache.html#ab7f8872f182f9d3e34caa9b41d3414da">wmhints</a>;
<a name="l00359"></a><a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">00359</a>     xcb_get_window_attributes_reply_t *<a class="code" href="class_m_window_property_cache.html#a8471406fc995236a89a647c2b3b76464">attrs</a>;
<a name="l00360"></a><a class="code" href="class_m_window_property_cache.html#a61598f3c9d7638baec9e704f5ea53658">00360</a>     <span class="keywordtype">unsigned</span> <a class="code" href="class_m_window_property_cache.html#a45cbb283189fc06b8ba66321547dfb7c">meego_layer</a>, <a class="code" href="class_m_window_property_cache.html#a506b5b687b47ceac189dc6c4a03ad623">low_power_mode</a>, <a class="code" href="class_m_window_property_cache.html#a61598f3c9d7638baec9e704f5ea53658">opaque_window</a>;
<a name="l00361"></a><a class="code" href="class_m_window_property_cache.html#a09315283c2d3fc79ed20a56327291d2e">00361</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a09315283c2d3fc79ed20a56327291d2e">prestarted</a>;
<a name="l00362"></a><a class="code" href="class_m_window_property_cache.html#a5ab5080e0e1cc19ad5db0735f9275806">00362</a>     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a5ab5080e0e1cc19ad5db0735f9275806">window_state</a>;
<a name="l00363"></a><a class="code" href="class_m_window_property_cache.html#a3b05af36fcb6ba67b8c980915cd76ac4">00363</a>     QVector&lt;Atom&gt; <a class="code" href="class_m_window_property_cache.html#a3b05af36fcb6ba67b8c980915cd76ac4">type_atoms</a>;
<a name="l00364"></a><a class="code" href="class_m_window_property_cache.html#a1904e3168a87a954548f2dc4fbbeb2d8">00364</a>     MCompAtoms::Type <a class="code" href="class_m_window_property_cache.html#a1904e3168a87a954548f2dc4fbbeb2d8">window_type</a>;
<a name="l00365"></a><a class="code" href="class_m_window_property_cache.html#a34d9f9f3a45814c013fefb0674616908">00365</a>     Window <a class="code" href="class_m_window_property_cache.html#a34d9f9f3a45814c013fefb0674616908">window</a>, <a class="code" href="class_m_window_property_cache.html#afc81e5776a7a83c45eb8e2a3952eb433">parent_window</a>;
<a name="l00366"></a><a class="code" href="class_m_window_property_cache.html#a0d73e0eb7c36c9a330f91824695f7029">00366</a>     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#ab7a24e142a397807158dbd527e41e543">always_mapped</a>, <a class="code" href="class_m_window_property_cache.html#a8710ab0ecfe4d9689b9fddc4d5a59127">cannot_minimize</a>, <a class="code" href="class_m_window_property_cache.html#a0d73e0eb7c36c9a330f91824695f7029">desktop_view</a>;
<a name="l00367"></a><a class="code" href="class_m_window_property_cache.html#ac155abd96bce672f61f10a2d67ff3d81">00367</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a469dd555537babf0feded31424a720bf">being_mapped</a>, <a class="code" href="class_m_window_property_cache.html#aec15e48a8a48a343646e58620c5bba2f">dont_iconify</a>, <a class="code" href="class_m_window_property_cache.html#ac155abd96bce672f61f10a2d67ff3d81">stacked_unmapped</a>;
<a name="l00368"></a><a class="code" href="class_m_window_property_cache.html#ab5c585c2584fc831e287d93f277e5393">00368</a>     QRegion <a class="code" href="class_m_window_property_cache.html#ab5c585c2584fc831e287d93f277e5393">custom_region</a>;
<a name="l00369"></a><a class="code" href="class_m_window_property_cache.html#a6c7fb0c2079c0b0a1ebffe233d96d3ff">00369</a>     <span class="keywordtype">unsigned</span> <a class="code" href="class_m_window_property_cache.html#a6c7fb0c2079c0b0a1ebffe233d96d3ff">orientation_angle</a>;
<a name="l00370"></a><a class="code" href="class_m_window_property_cache.html#a77c00482ccbf2282e0843a5d7a8616c5">00370</a>     QRegion <a class="code" href="class_m_window_property_cache.html#a77c00482ccbf2282e0843a5d7a8616c5">shape_region</a>;
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <span class="comment">// @requests stores the state of the property requests, indexed by</span>
<a name="l00373"></a>00373     <span class="comment">// the SLOT() of the collector function (isDecorator(), customRegion(),</span>
<a name="l00374"></a>00374     <span class="comment">// etc).  If the collector is not in the hash then the property value</span>
<a name="l00375"></a>00375     <span class="comment">// has not requested yet.  If the value is non-zero a request is ongoing.</span>
<a name="l00376"></a>00376     <span class="comment">// Otherwise if the value is zero the property value is considered up</span>
<a name="l00377"></a>00377     <span class="comment">// to date.</span>
<a name="l00378"></a>00378     <span class="comment">//</span>
<a name="l00379"></a>00379     <span class="comment">// When the object is initialized we request the values of some</span>
<a name="l00380"></a>00380     <span class="comment">// properties.  When a property value we&#39;re interested in changes</span>
<a name="l00381"></a>00381     <span class="comment">// we cancel any ongoing requests about that property and make a</span>
<a name="l00382"></a>00382     <span class="comment">// new one.  On the destruction of the object we cancel all requests.</span>
<a name="l00383"></a>00383     <span class="comment">//</span>
<a name="l00384"></a>00384     <span class="comment">// When a collector function is called and it doesn&#39;t find itself in</span>
<a name="l00385"></a>00385     <span class="comment">// the @requests table it makes a requesgts and waits for the reply.</span>
<a name="l00386"></a>00386     <span class="comment">// If it see that a request has been ongoing it just waits for the</span>
<a name="l00387"></a>00387     <span class="comment">// reply.  Otherwise, if it finds that the property value is known</span>
<a name="l00388"></a>00388     <span class="comment">// and has not been changed it simply returns it.  If the property</span>
<a name="l00389"></a>00389     <span class="comment">// cache object is not valid then it just returns the default value</span>
<a name="l00390"></a>00390     <span class="comment">// set by init().</span>
<a name="l00391"></a>00391     <span class="comment">//</span>
<a name="l00392"></a>00392     <span class="comment">// When a request is made @collect_timer is restarted, and we collect</span>
<a name="l00393"></a>00393     <span class="comment">// the reply unconditionally when it expires.</span>
<a name="l00394"></a><a class="code" href="class_m_window_property_cache.html#a3e86abcb3b914249ef5d400785b24a47">00394</a>     <a class="code" href="class_m_c_smart_timer.html">MCSmartTimer</a> *<a class="code" href="class_m_window_property_cache.html#a3e86abcb3b914249ef5d400785b24a47">collect_timer</a>;
<a name="l00395"></a><a class="code" href="class_m_window_property_cache.html#a30f6c6b03179c4b9c8ca916e6cbf2efd">00395</a>     <a class="code" href="class_m_window_property_cache_1_1_collector.html">Collector</a> <a class="code" href="class_m_window_property_cache.html#a30f6c6b03179c4b9c8ca916e6cbf2efd">requests</a>[lastCollectorKey];
<a name="l00396"></a>00396     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a7fcac99be7390728fe3443effe746516">isUpdate</a>(<span class="keyword">const</span> <a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045">CollectorKey</a> collector);
<a name="l00397"></a>00397     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a33a1cab2d51b47ed00d321279b4115b6">addRequest</a>(<span class="keyword">const</span> <a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045">CollectorKey</a> key, <span class="keyword">const</span> QLatin1String &amp;collector,
<a name="l00398"></a>00398                     <span class="keywordtype">unsigned</span> cookie);
<a name="l00399"></a>00399     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#ac3c995ce550dd05a89fa0e2214bb371a">replyCollected</a>(<span class="keyword">const</span> <a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045">CollectorKey</a> key);
<a name="l00400"></a>00400     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#aa497e22f759d628041adf284468d1132">cancelRequest</a>(<span class="keyword">const</span> <a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045">CollectorKey</a> key);
<a name="l00401"></a>00401     <span class="keywordtype">unsigned</span> <a class="code" href="class_m_window_property_cache.html#a1c96011233a03749046d2e026506b4e0">requestProperty</a>(Atom prop, Atom type, <span class="keywordtype">unsigned</span> n = 1);
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     <span class="comment">// Overloads to make the routines above callable with other types.</span>
<a name="l00404"></a><a class="code" href="class_m_window_property_cache.html#a503fb0aa09e44ca27a4d1efc6385f07d">00404</a>     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a33a1cab2d51b47ed00d321279b4115b6">addRequest</a>(<span class="keyword">const</span> <a class="code" href="class_m_window_property_cache.html#acb1bf51fb6f807400cbe49db7d6ed045">CollectorKey</a> key, <span class="keyword">const</span> <span class="keywordtype">char</span> *collector, <span class="keywordtype">unsigned</span> cookie)
<a name="l00405"></a>00405         { <a class="code" href="class_m_window_property_cache.html#a503fb0aa09e44ca27a4d1efc6385f07d">addRequest</a>(key, QLatin1String(collector), cookie); }
<a name="l00406"></a><a class="code" href="class_m_window_property_cache.html#a7dab26e50eac9d9aaa7ccb22d2ad4418">00406</a>     <span class="keywordtype">unsigned</span> <a class="code" href="class_m_window_property_cache.html#a1c96011233a03749046d2e026506b4e0">requestProperty</a>(MCompAtoms::Atoms prop, Atom type,
<a name="l00407"></a>00407                              <span class="keywordtype">unsigned</span> n = 1)
<a name="l00408"></a>00408         { <span class="keywordflow">return</span> <a class="code" href="class_m_window_property_cache.html#a7dab26e50eac9d9aaa7ccb22d2ad4418">requestProperty</a>(MCompAtoms::atoms[prop], type, n); }
<a name="l00409"></a>00409     <span class="comment">// some unit tests want to fake window properties</span>
<a name="l00410"></a>00410     <span class="keywordtype">void</span> <a class="code" href="class_m_window_property_cache.html#a69edf19bd20a443e994b74ab3af31c9e">cancelAllRequests</a>();
<a name="l00411"></a>00411 
<a name="l00412"></a><a class="code" href="class_m_window_property_cache.html#ae12c9c00145ac5bea353272150045212">00412</a>     <span class="keyword">static</span> xcb_connection_t *<a class="code" href="class_m_window_property_cache.html#ae12c9c00145ac5bea353272150045212">xcb_conn</a>;
<a name="l00413"></a><a class="code" href="class_m_window_property_cache.html#a57db729a20c464d69047197503cfa890">00413</a>     <span class="keyword">static</span> xcb_render_query_pict_formats_reply_t *<a class="code" href="class_m_window_property_cache.html#a57db729a20c464d69047197503cfa890">pict_formats_reply</a>;
<a name="l00414"></a><a class="code" href="class_m_window_property_cache.html#ad3aab5e28eea0ec7945cfb111c67c830">00414</a>     <span class="keyword">static</span> xcb_render_query_pict_formats_cookie_t <a class="code" href="class_m_window_property_cache.html#ad3aab5e28eea0ec7945cfb111c67c830">pict_formats_cookie</a>;
<a name="l00415"></a><a class="code" href="class_m_window_property_cache.html#a601e0fb3339e31e5d4038be41f2e5668">00415</a>     Damage <a class="code" href="class_m_window_property_cache.html#a601e0fb3339e31e5d4038be41f2e5668">damage_object</a>;
<a name="l00416"></a><a class="code" href="class_m_window_property_cache.html#a36b32526ae0cb26820a19dff6a8f922a">00416</a>     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a36b32526ae0cb26820a19dff6a8f922a">damage_report_level</a>;
<a name="l00417"></a><a class="code" href="class_m_window_property_cache.html#a8bcb095af9a31b8f3846ef374ae762e7">00417</a>     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a8bcb095af9a31b8f3846ef374ae762e7">waiting_for_damage</a>;
<a name="l00418"></a><a class="code" href="class_m_window_property_cache.html#a74ff32ba3ff10f6c43d22c244905e847">00418</a>     QString <a class="code" href="class_m_window_property_cache.html#a74ff32ba3ff10f6c43d22c244905e847">wm_name</a>;
<a name="l00419"></a><a class="code" href="class_m_window_property_cache.html#a372aa3e84130c063d15cb91b5eb3fc82">00419</a>     <span class="keywordtype">unsigned</span> <a class="code" href="class_m_window_property_cache.html#a372aa3e84130c063d15cb91b5eb3fc82">wm_pid</a>, <a class="code" href="class_m_window_property_cache.html#a93882cb55a6e94ec745302b7924587a8">no_animations</a>;
<a name="l00420"></a><a class="code" href="class_m_window_property_cache.html#a9ae6ab5692e4f79bdb9290725aa1cd22">00420</a>     <span class="keywordtype">int</span> <a class="code" href="class_m_window_property_cache.html#a9ae6ab5692e4f79bdb9290725aa1cd22">video_overlay</a>;
<a name="l00421"></a><a class="code" href="class_m_window_property_cache.html#a6ceb76cf72308e8211b41e7ee63e5f5c">00421</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#a6ceb76cf72308e8211b41e7ee63e5f5c">pending_damage</a>;
<a name="l00422"></a><a class="code" href="class_m_window_property_cache.html#ae5f4dc8d4f15afb7d5eca08e56908407">00422</a>     <span class="keywordtype">bool</span> <a class="code" href="class_m_window_property_cache.html#ae5f4dc8d4f15afb7d5eca08e56908407">skipping_taskbar_marker</a>;
<a name="l00423"></a>00423 
<a name="l00424"></a><a class="code" href="class_m_window_property_cache.html#af3617f66be1652273dd848cd85dcba16">00424</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_m_window_property_cache.html#af3617f66be1652273dd848cd85dcba16">ut_Compositing</a>;
<a name="l00425"></a>00425 };
<a name="l00426"></a>00426 
<a name="l00427"></a>00427 <span class="comment">// Non-deletable dummy MWindowPropertyCache.</span>
<a name="l00428"></a><a class="code" href="class_m_window_dummy_property_cache.html">00428</a> <span class="keyword">class </span><a class="code" href="class_m_window_dummy_property_cache.html">MWindowDummyPropertyCache</a>: <span class="keyword">public</span> <a class="code" href="class_m_window_property_cache.html">MWindowPropertyCache</a>
<a name="l00429"></a>00429 {
<a name="l00430"></a>00430 <span class="keyword">public</span>:
<a name="l00431"></a>00431     <span class="keyword">static</span> <a class="code" href="class_m_window_dummy_property_cache.html">MWindowDummyPropertyCache</a> *<span class="keyword">get</span>();
<a name="l00432"></a>00432 
<a name="l00433"></a>00433 <span class="keyword">private</span>:
<a name="l00434"></a>00434     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> event(QEvent *e);
<a name="l00435"></a>00435 
<a name="l00436"></a>00436     <span class="keyword">static</span> <a class="code" href="class_m_window_dummy_property_cache.html">MWindowDummyPropertyCache</a> *singleton;
<a name="l00437"></a>00437 };
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr>
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td width="30%" align="left">Copyright &copy; 2011 Nokia Corporation</td>
<td width="40%" align="center">Generated on Sun Mar 31 2013 23:27:33<br>Doxygen 1.7.1</td>
<td width="30%" align="right"><div align="right">MeeGo Touch</div></td>
</tr></table>
</body>
</html>
